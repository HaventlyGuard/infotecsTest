<div class="container">
  <header class="header">
    <h1>–ü–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Infotecs</h1>
    <div class="header-actions">
      <div class="stats">
        –í—Å–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤: <strong>{{ totalDevices }}</strong>
        <span *ngIf="devices.length > 0" class="badge">–ü–æ–∫–∞–∑–∞–Ω–æ: {{ devices.length }}</span>
      </div>
      <button class="btn-refresh" (click)="loadDevices()" title="–û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤">
        <span class="refresh-icon">‚Üª</span>
        <span class="refresh-text">–û–±–Ω–æ–≤–∏—Ç—å</span>
      </button>
    </div>
  </header>

  <div class="dashboard-layout">
    <div class="devices-panel">
      <div class="panel-header">
        <div class="panel-title">
          <h2>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h2>
          <span class="device-count" *ngIf="devices.length > 0">{{ devices.length }}</span>
        </div>
        <div class="panel-controls">
          <div class="pagination-controls">
            <button class="btn-icon" (click)="prevPage()" [disabled]="deviceFilter.offset === 0">
              <span>‚Üê</span>
            </button>
            <span class="pagination-info">
              {{ getCurrentPage() }}/{{ getTotalPages() }}
            </span>
            <button class="btn-icon" (click)="nextPage()" 
                    [disabled]="(deviceFilter.offset + deviceFilter.limit) >= totalDevices">
              <span>‚Üí</span>
            </button>
          </div>
        </div>
      </div>

      <app-device-list
        *ngIf="devices.length > 0; else emptyDevices"
        [devices]="devices"
        [selectedDeviceId]="selectedDeviceId"
        (deviceSelected)="onDeviceSelected($event)"
        (devicesUpdated)="onDevicesUpdated()">
      </app-device-list>
      
      <ng-template #emptyDevices>
        <div class="empty-state">
          <div class="empty-icon">üì±</div>
          <h3>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
          <p *ngIf="errorMessage">–û—à–∏–±–∫–∞: {{ errorMessage }}</p>
          <p *ngIf="!errorMessage">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É</p>
          <button class="btn-retry" (click)="loadDevices()">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
        </div>
      </ng-template>
    </div>

    <div class="sessions-panel">
      <div class="panel-header" *ngIf="selectedDeviceId">
        <div class="panel-title">
          <h2>–°–µ—Å—Å–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</h2>
          <span class="device-id-badge">{{ selectedDeviceId | slice:0:8 }}...</span>
        </div>
        <button class="btn-icon btn-refresh-small" (click)="refreshSessions()" title="–û–±–Ω–æ–≤–∏—Ç—å —Å–µ—Å—Å–∏–∏">
          ‚Üª
        </button>
      </div>

      <app-session-list
        *ngIf="selectedDeviceId; else emptySessions"
        [deviceId]="selectedDeviceId"
        (sessionsUpdated)="onDevicesUpdated()"
        (refreshRequested)="refreshSessions()">
      </app-session-list>
      
      <ng-template #emptySessions>
        <div class="empty-state">
          <div class="empty-icon">üìä</div>
          <h3>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ</h3>
          <p>–í—ã–±–µ—Ä–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–≤–∞</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>