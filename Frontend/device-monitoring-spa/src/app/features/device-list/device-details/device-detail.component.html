<div class="device-detail-container">
  <div class="header">
    <a routerLink="/" class="btn-back">← К списку устройств</a>
    <h2>Сессии устройства</h2>
    <p class="device-id">ID: {{ deviceId }}</p>
  </div>

  @if (loading) {
    <div class="loading">Загрузка сессий...</div>
  }

  @if (error) {
    <div class="error">{{ error }}</div>
  }

  @if (!loading && !error) {
    @if (sessions.length === 0) {
      <div class="empty">Нет записей о сессиях для этого устройства</div>
    } @else {
      <div class="sessions-table-container">
        <table class="sessions-table">
          <thead>
            <tr>
              <th>Пользователь</th>
              <th>Время включения</th>
              <th>Время выключения</th>
              <th>Версия</th>
              <th>Длительность</th>
            </tr>
          </thead>
          <tbody>
            @for (session of sessions; track session._id + session.startTime) {
              <tr>
                <td>{{ session.name }}</td>
                <td>{{ session.startTime | date:'dd.MM.yyyy HH:mm:ss' }}</td>
                <td>{{ session.endTime | date:'dd.MM.yyyy HH:mm:ss' }}</td>
                <td>{{ session.version }}</td>
                <td>{{ getDuration(session.startTime, session.endTime) }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }

    <div class="delete-section">
      <h3>Управление записями</h3>
      <div class="delete-controls">
        <label for="deleteDate">Удалить записи до:</label>
        <input 
          type="date" 
          id="deleteDate" 
          [(ngModel)]="deleteBeforeDate"
          [max]="today"
        />
        <button (click)="deleteOldSessions()" class="btn-delete">
          Удалить устаревшие записи
        </button>
      </div>
    </div>
  }
</div>